<style>
  #radarBlock { margin-top: 1em; background: #333; padding: 1em; border-radius: 10px; color: white; }
  #radarSelect, #ortInput, #ortBtn {
    padding: 6px;
    font-size: 1rem;
    margin: 5px 4px 10px 0;
    background: #222;
    color: white;
    border: 1px solid #555;
    border-radius: 5px;
  }
  #ortInput { width: 200px; }
  #radarFrame { width: 100%; height: 400px; border-radius: 10px; border: none; }
  @media(max-width: 600px) {
    #ortInput { width: 100%; margin-bottom: 8px; }
    #radarFrame { height: 300px; }
  }
</style>

<div id="radarBlock">
  <label for="ortInput">üìç Ort:</label>
  <input type="text" id="ortInput" placeholder="z.‚ÄØB. Straubing">
  <button id="ortBtn" onclick="sucheOrt()">Suchen</button>
  <br>
  <label for="radarSelect">üåç Anzeige:</label>
  <select id="radarSelect" onchange="wechselRadar()">
    <option value="radar">Regenradar</option>
    <option value="wind">Wind</option>
    <option value="clouds">Wolken</option>
    <option value="temp">Temperatur</option>
    <option value="pressure">Luftdruck</option>
  </select>
  <iframe id="radarFrame"></iframe>
</div>

<script>
let lat = 48.88, lon = 12.62;
function wechselRadar() {
  const typ = document.getElementById("radarSelect").value;
  const url = `https://embed.windy.com/embed2.html?lat=${lat}&lon=${lon}&detailLat=${lat}&detailLon=${lon}&width=650&height=450&zoom=9&level=surface&overlay=${typ}&product=${typ}&menu=&message=&marker=&calendar=&pressure=&type=map&location=coordinates&metricWind=km%2Fh&metricTemp=%C2%B0C`;
  document.getElementById("radarFrame").src = url;
}
async function sucheOrt() {
  const ort = document.getElementById("ortInput").value;
  const r = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(ort)}&format=json&limit=1`);
  const j = await r.json();
  if (j.length > 0) {
    lat = parseFloat(j[0].lat);
    lon = parseFloat(j[0].lon);
    wechselRadar();
  } else {
    alert("Ort nicht gefunden.");
  }
}
wechselRadar();
</script>
